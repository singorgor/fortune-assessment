"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/test/page",{

/***/ "(app-pages-browser)/./src/lib/storage.ts":
/*!****************************!*\
  !*** ./src/lib/storage.ts ***!
  \****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ClientStorage: () => (/* binding */ ClientStorage),\n/* harmony export */   createClientStorage: () => (/* binding */ createClientStorage),\n/* harmony export */   createLocalStorage: () => (/* binding */ createLocalStorage)\n/* harmony export */ });\n/* harmony import */ var _utils_chart_analysis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/utils/chart-analysis */ \"(app-pages-browser)/./src/utils/chart-analysis.ts\");\n/* harmony import */ var _utils_report_generator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/utils/report-generator */ \"(app-pages-browser)/./src/utils/report-generator.ts\");\n\n\nconst DB_NAME = 'fortune2026';\nconst DB_VERSION = 1;\nconst STORE_NAME = 'testResults';\nclass ClientStorage {\n    async init() {\n        return new Promise((resolve, reject)=>{\n            const request = indexedDB.open(DB_NAME, DB_VERSION);\n            request.onerror = ()=>{\n                reject(new Error('Failed to open database'));\n            };\n            request.onsuccess = ()=>{\n                this.db = request.result;\n                resolve(this.db);\n            };\n            request.onupgradeneeded = (event)=>{\n                const db = event.target.result;\n                if (!db.objectStoreNames.contains(STORE_NAME)) {\n                    const store = db.createObjectStore(STORE_NAME, {\n                        keyPath: 'id'\n                    });\n                    store.createIndex('attempt_token', 'attempt_token', {\n                        unique: true\n                    });\n                    store.createIndex('timestamp', 'timestamp', {\n                        unique: false\n                    });\n                }\n            };\n        });\n    }\n    async ensureDB() {\n        if (!this.db) {\n            await this.init();\n        }\n    }\n    async saveTestResult(data) {\n        // 备用方案：使用 localStorage\n        try {\n            // 分析命盘\n            const chartProfile = (0,_utils_chart_analysis__WEBPACK_IMPORTED_MODULE_0__.analyzeChart)(data.birthInfo.year, data.birthInfo.month, data.birthInfo.day, data.birthInfo.hour, data.birthInfo.minute, data.birthInfo.isHourUnknown);\n            // 生成报告\n            const report = (0,_utils_report_generator__WEBPACK_IMPORTED_MODULE_1__.generateReport)(chartProfile, data.situation);\n            const storedData = {\n                attempt_token: 'token_' + Date.now(),\n                result_snapshot: {\n                    chartProfile,\n                    userContext: data.situation,\n                    report\n                },\n                profile_hash: Date.now().toString(),\n                timestamp: Date.now(),\n                version: '1.0.0'\n            };\n            // 使用 localStorage 保存\n            localStorage.setItem('fortune2026_result', JSON.stringify(storedData));\n            return Promise.resolve();\n        } catch (error) {\n            console.error('分析或生成报告时出错:', error);\n            return Promise.reject(error);\n        }\n    }\n    async getResult() {\n        await this.ensureDB();\n        return new Promise((resolve, reject)=>{\n            if (!this.db) {\n                reject(new Error('Database not initialized'));\n                return;\n            }\n            const transaction = this.db.transaction([\n                STORE_NAME\n            ], 'readonly');\n            const store = transaction.objectStore(STORE_NAME);\n            const request = store.get('current');\n            request.onerror = ()=>{\n                reject(new Error('Failed to get data'));\n            };\n            request.onsuccess = ()=>{\n                const result = request.result;\n                if (result) {\n                    // 移除 id 字段，返回标准的 StoredData 格式\n                    const { id, ...storedData } = result;\n                    resolve(storedData);\n                } else {\n                    resolve(null);\n                }\n            };\n        });\n    }\n    async hasResult() {\n        const result = await this.getResult();\n        return result !== null;\n    }\n    async clearAll() {\n        await this.ensureDB();\n        return new Promise((resolve, reject)=>{\n            if (!this.db) {\n                reject(new Error('Database not initialized'));\n                return;\n            }\n            const transaction = this.db.transaction([\n                STORE_NAME\n            ], 'readwrite');\n            const store = transaction.objectStore(STORE_NAME);\n            const request = store.clear();\n            request.onerror = ()=>{\n                reject(new Error('Failed to clear data'));\n            };\n            request.onsuccess = ()=>{\n                resolve();\n            };\n        });\n    }\n    generateToken() {\n        return 'token_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\n    }\n    generateHash(data) {\n        // 简单的hash函数，用于验证数据完整性\n        const str = JSON.stringify(data);\n        let hash = 0;\n        for(let i = 0; i < str.length; i++){\n            const char = str.charCodeAt(i);\n            hash = (hash << 5) - hash + char;\n            hash = hash & hash // Convert to 32bit integer\n            ;\n        }\n        return hash.toString(36);\n    }\n    constructor(){\n        this.db = null;\n    }\n}\n// 单例模式\nlet storageInstance = null;\nfunction createClientStorage() {\n    if (!storageInstance) {\n        storageInstance = new ClientStorage();\n    }\n    return storageInstance;\n}\n// 兼容 localStorage 的简单版本（备用方案）\nfunction createLocalStorage() {\n    return {\n        async saveTestResult (data) {\n            const chartProfile = (0,_utils_chart_analysis__WEBPACK_IMPORTED_MODULE_0__.analyzeChart)(data.birthInfo.year, data.birthInfo.month, data.birthInfo.day, data.birthInfo.hour, data.birthInfo.minute, data.birthInfo.isHourUnknown);\n            const report = (0,_utils_report_generator__WEBPACK_IMPORTED_MODULE_1__.generateReport)(chartProfile, data.situation);\n            const storedData = {\n                attempt_token: 'token_' + Date.now(),\n                result_snapshot: {\n                    chartProfile,\n                    userContext: data.situation,\n                    report\n                },\n                profile_hash: Date.now().toString(),\n                timestamp: Date.now(),\n                version: '1.0.0'\n            };\n            localStorage.setItem('fortune2026_result', JSON.stringify(storedData));\n        },\n        async getResult () {\n            const data = localStorage.getItem('fortune2026_result');\n            return data ? JSON.parse(data) : null;\n        },\n        async hasResult () {\n            return !!localStorage.getItem('fortune2026_result');\n        },\n        async clearAll () {\n            localStorage.removeItem('fortune2026_result');\n        }\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvc3RvcmFnZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUNxRDtBQUNJO0FBRXpELE1BQU1FLFVBQVU7QUFDaEIsTUFBTUMsYUFBYTtBQUNuQixNQUFNQyxhQUFhO0FBRVosTUFBTUM7SUFHWCxNQUFNQyxPQUFPO1FBQ1gsT0FBTyxJQUFJQyxRQUFRLENBQUNDLFNBQVNDO1lBQzNCLE1BQU1DLFVBQVVDLFVBQVVDLElBQUksQ0FBQ1YsU0FBU0M7WUFFeENPLFFBQVFHLE9BQU8sR0FBRztnQkFDaEJKLE9BQU8sSUFBSUssTUFBTTtZQUNuQjtZQUVBSixRQUFRSyxTQUFTLEdBQUc7Z0JBQ2xCLElBQUksQ0FBQ0MsRUFBRSxHQUFHTixRQUFRTyxNQUFNO2dCQUN4QlQsUUFBUSxJQUFJLENBQUNRLEVBQUU7WUFDakI7WUFFQU4sUUFBUVEsZUFBZSxHQUFHLENBQUNDO2dCQUN6QixNQUFNSCxLQUFLLE1BQU9JLE1BQU0sQ0FBc0JILE1BQU07Z0JBRXBELElBQUksQ0FBQ0QsR0FBR0ssZ0JBQWdCLENBQUNDLFFBQVEsQ0FBQ2xCLGFBQWE7b0JBQzdDLE1BQU1tQixRQUFRUCxHQUFHUSxpQkFBaUIsQ0FBQ3BCLFlBQVk7d0JBQUVxQixTQUFTO29CQUFLO29CQUMvREYsTUFBTUcsV0FBVyxDQUFDLGlCQUFpQixpQkFBaUI7d0JBQUVDLFFBQVE7b0JBQUs7b0JBQ25FSixNQUFNRyxXQUFXLENBQUMsYUFBYSxhQUFhO3dCQUFFQyxRQUFRO29CQUFNO2dCQUM5RDtZQUNGO1FBQ0Y7SUFDRjtJQUVBLE1BQWNDLFdBQVc7UUFDdkIsSUFBSSxDQUFDLElBQUksQ0FBQ1osRUFBRSxFQUFFO1lBQ1osTUFBTSxJQUFJLENBQUNWLElBQUk7UUFDakI7SUFDRjtJQUVBLE1BQU11QixlQUFlQyxJQUdwQixFQUFFO1FBQ0QsdUJBQXVCO1FBQ3ZCLElBQUk7WUFDRixPQUFPO1lBQ1AsTUFBTUMsZUFBZS9CLG1FQUFZQSxDQUMvQjhCLEtB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QUFPcUIsYUFBYTRCLE9BQU8sQ0FBQztZQUNsQyxPQUFPakQsT0FBT3VCLEtBQUsyQixLQUFLLENBQUNsRCxRQUFRO1FBQ25DO1FBRUEsTUFBTWdDO1lBQ0osT0FBTyxDQUFDLENBQUNYLGFBQWE0QixPQUFPLENBQUM7UUFDaEM7UUFFQSxNQUFNaEI7WUFDSlosYUFBYThCLFVBQVUsQ0FBQztRQUMxQjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIkQ6XFzlt6XkvZzmlofku7ZcXOaXpeW4uOW3peS9nFxc5byA5Y+R6L2v5Lu2XFzmtYvor4Tnm7jlhbNcXDIwMjbov5Dlir/mtYvor4RcXHNyY1xcbGliXFxzdG9yYWdlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN0b3JlZERhdGEsIENoYXJ0UHJvZmlsZSwgVXNlckNvbnRleHQsIFJlcG9ydCB9IGZyb20gJ0AvdHlwZXMnXG5pbXBvcnQgeyBhbmFseXplQ2hhcnQgfSBmcm9tICdAL3V0aWxzL2NoYXJ0LWFuYWx5c2lzJ1xuaW1wb3J0IHsgZ2VuZXJhdGVSZXBvcnQgfSBmcm9tICdAL3V0aWxzL3JlcG9ydC1nZW5lcmF0b3InXG5cbmNvbnN0IERCX05BTUUgPSAnZm9ydHVuZTIwMjYnXG5jb25zdCBEQl9WRVJTSU9OID0gMVxuY29uc3QgU1RPUkVfTkFNRSA9ICd0ZXN0UmVzdWx0cydcblxuZXhwb3J0IGNsYXNzIENsaWVudFN0b3JhZ2Uge1xuICBwcml2YXRlIGRiOiBJREJEYXRhYmFzZSB8IG51bGwgPSBudWxsXG5cbiAgYXN5bmMgaW5pdCgpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKERCX05BTUUsIERCX1ZFUlNJT04pXG5cbiAgICAgIHJlcXVlc3Qub25lcnJvciA9ICgpID0+IHtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignRmFpbGVkIHRvIG9wZW4gZGF0YWJhc2UnKSlcbiAgICAgIH1cblxuICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuZGIgPSByZXF1ZXN0LnJlc3VsdFxuICAgICAgICByZXNvbHZlKHRoaXMuZGIpXG4gICAgICB9XG5cbiAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGRiID0gKGV2ZW50LnRhcmdldCBhcyBJREJPcGVuREJSZXF1ZXN0KS5yZXN1bHRcblxuICAgICAgICBpZiAoIWRiLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoU1RPUkVfTkFNRSkpIHtcbiAgICAgICAgICBjb25zdCBzdG9yZSA9IGRiLmNyZWF0ZU9iamVjdFN0b3JlKFNUT1JFX05BTUUsIHsga2V5UGF0aDogJ2lkJyB9KVxuICAgICAgICAgIHN0b3JlLmNyZWF0ZUluZGV4KCdhdHRlbXB0X3Rva2VuJywgJ2F0dGVtcHRfdG9rZW4nLCB7IHVuaXF1ZTogdHJ1ZSB9KVxuICAgICAgICAgIHN0b3JlLmNyZWF0ZUluZGV4KCd0aW1lc3RhbXAnLCAndGltZXN0YW1wJywgeyB1bmlxdWU6IGZhbHNlIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBlbnN1cmVEQigpIHtcbiAgICBpZiAoIXRoaXMuZGIpIHtcbiAgICAgIGF3YWl0IHRoaXMuaW5pdCgpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgc2F2ZVRlc3RSZXN1bHQoZGF0YToge1xuICAgIGJpcnRoSW5mbzogYW55XG4gICAgc2l0dWF0aW9uOiBVc2VyQ29udGV4dFxuICB9KSB7XG4gICAgLy8g5aSH55So5pa55qGI77ya5L2/55SoIGxvY2FsU3RvcmFnZVxuICAgIHRyeSB7XG4gICAgICAvLyDliIbmnpDlkb3nm5hcbiAgICAgIGNvbnN0IGNoYXJ0UHJvZmlsZSA9IGFuYWx5emVDaGFydChcbiAgICAgICAgZGF0YS5iaXJ0aEluZm8ueWVhcixcbiAgICAgICAgZGF0YS5iaXJ0aEluZm8ubW9udGgsXG4gICAgICAgIGRhdGEuYmlydGhJbmZvLmRheSxcbiAgICAgICAgZGF0YS5iaXJ0aEluZm8uaG91cixcbiAgICAgICAgZGF0YS5iaXJ0aEluZm8ubWludXRlLFxuICAgICAgICBkYXRhLmJpcnRoSW5mby5pc0hvdXJVbmtub3duXG4gICAgICApXG5cbiAgICAgIC8vIOeUn+aIkOaKpeWRilxuICAgICAgY29uc3QgcmVwb3J0ID0gZ2VuZXJhdGVSZXBvcnQoY2hhcnRQcm9maWxlLCBkYXRhLnNpdHVhdGlvbilcblxuICAgICAgY29uc3Qgc3RvcmVkRGF0YSA9IHtcbiAgICAgICAgYXR0ZW1wdF90b2tlbjogJ3Rva2VuXycgKyBEYXRlLm5vdygpLFxuICAgICAgICByZXN1bHRfc25hcHNob3Q6IHtcbiAgICAgICAgICBjaGFydFByb2ZpbGUsXG4gICAgICAgICAgdXNlckNvbnRleHQ6IGRhdGEuc2l0dWF0aW9uLFxuICAgICAgICAgIHJlcG9ydFxuICAgICAgICB9LFxuICAgICAgICBwcm9maWxlX2hhc2g6IERhdGUubm93KCkudG9TdHJpbmcoKSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICB2ZXJzaW9uOiAnMS4wLjAnXG4gICAgICB9XG5cbiAgICAgIC8vIOS9v+eUqCBsb2NhbFN0b3JhZ2Ug5L+d5a2YXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZm9ydHVuZTIwMjZfcmVzdWx0JywgSlNPTi5zdHJpbmdpZnkoc3RvcmVkRGF0YSkpXG5cbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfliIbmnpDmiJbnlJ/miJDmiqXlkYrml7blh7rplJk6JywgZXJyb3IpXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0UmVzdWx0KCk6IFByb21pc2U8U3RvcmVkRGF0YSB8IG51bGw+IHtcbiAgICBhd2FpdCB0aGlzLmVuc3VyZURCKClcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBpZiAoIXRoaXMuZGIpIHtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignRGF0YWJhc2Ugbm90IGluaXRpYWxpemVkJykpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IHRoaXMuZGIudHJhbnNhY3Rpb24oW1NUT1JFX05BTUVdLCAncmVhZG9ubHknKVxuICAgICAgY29uc3Qgc3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZShTVE9SRV9OQU1FKVxuICAgICAgY29uc3QgcmVxdWVzdCA9IHN0b3JlLmdldCgnY3VycmVudCcpXG5cbiAgICAgIHJlcXVlc3Qub25lcnJvciA9ICgpID0+IHtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignRmFpbGVkIHRvIGdldCBkYXRhJykpXG4gICAgICB9XG5cbiAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSByZXF1ZXN0LnJlc3VsdFxuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgLy8g56e76ZmkIGlkIOWtl+aute+8jOi/lOWbnuagh+WHhueahCBTdG9yZWREYXRhIOagvOW8j1xuICAgICAgICAgIGNvbnN0IHsgaWQsIC4uLnN0b3JlZERhdGEgfSA9IHJlc3VsdFxuICAgICAgICAgIHJlc29sdmUoc3RvcmVkRGF0YSBhcyBTdG9yZWREYXRhKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc29sdmUobnVsbClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBhc3luYyBoYXNSZXN1bHQoKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5nZXRSZXN1bHQoKVxuICAgIHJldHVybiByZXN1bHQgIT09IG51bGxcbiAgfVxuXG4gIGFzeW5jIGNsZWFyQWxsKCkge1xuICAgIGF3YWl0IHRoaXMuZW5zdXJlREIoKVxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGlmICghdGhpcy5kYikge1xuICAgICAgICByZWplY3QobmV3IEVycm9yKCdEYXRhYmFzZSBub3QgaW5pdGlhbGl6ZWQnKSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gdGhpcy5kYi50cmFuc2FjdGlvbihbU1RPUkVfTkFNRV0sICdyZWFkd3JpdGUnKVxuICAgICAgY29uc3Qgc3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZShTVE9SRV9OQU1FKVxuICAgICAgY29uc3QgcmVxdWVzdCA9IHN0b3JlLmNsZWFyKClcblxuICAgICAgcmVxdWVzdC5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgICByZWplY3QobmV3IEVycm9yKCdGYWlsZWQgdG8gY2xlYXIgZGF0YScpKVxuICAgICAgfVxuXG4gICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcbiAgICAgICAgcmVzb2x2ZSgpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVUb2tlbigpOiBzdHJpbmcge1xuICAgIHJldHVybiAndG9rZW5fJyArIERhdGUubm93KCkgKyAnXycgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSlcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVIYXNoKGRhdGE6IGFueSk6IHN0cmluZyB7XG4gICAgLy8g566A5Y2V55qEaGFzaOWHveaVsO+8jOeUqOS6jumqjOivgeaVsOaNruWujOaVtOaAp1xuICAgIGNvbnN0IHN0ciA9IEpTT04uc3RyaW5naWZ5KGRhdGEpXG4gICAgbGV0IGhhc2ggPSAwXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGNoYXIgPSBzdHIuY2hhckNvZGVBdChpKVxuICAgICAgaGFzaCA9ICgoaGFzaCA8PCA1KSAtIGhhc2gpICsgY2hhclxuICAgICAgaGFzaCA9IGhhc2ggJiBoYXNoIC8vIENvbnZlcnQgdG8gMzJiaXQgaW50ZWdlclxuICAgIH1cbiAgICByZXR1cm4gaGFzaC50b1N0cmluZygzNilcbiAgfVxufVxuXG4vLyDljZXkvovmqKHlvI9cbmxldCBzdG9yYWdlSW5zdGFuY2U6IENsaWVudFN0b3JhZ2UgfCBudWxsID0gbnVsbFxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2xpZW50U3RvcmFnZSgpOiBDbGllbnRTdG9yYWdlIHtcbiAgaWYgKCFzdG9yYWdlSW5zdGFuY2UpIHtcbiAgICBzdG9yYWdlSW5zdGFuY2UgPSBuZXcgQ2xpZW50U3RvcmFnZSgpXG4gIH1cbiAgcmV0dXJuIHN0b3JhZ2VJbnN0YW5jZVxufVxuXG4vLyDlhbzlrrkgbG9jYWxTdG9yYWdlIOeahOeugOWNleeJiOacrO+8iOWkh+eUqOaWueahiO+8iVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUxvY2FsU3RvcmFnZSgpIHtcbiAgcmV0dXJuIHtcbiAgICBhc3luYyBzYXZlVGVzdFJlc3VsdChkYXRhOiBhbnkpIHtcbiAgICAgIGNvbnN0IGNoYXJ0UHJvZmlsZSA9IGFuYWx5emVDaGFydChcbiAgICAgICAgZGF0YS5iaXJ0aEluZm8ueWVhcixcbiAgICAgICAgZGF0YS5iaXJ0aEluZm8ubW9udGgsXG4gICAgICAgIGRhdGEuYmlydGhJbmZvLmRheSxcbiAgICAgICAgZGF0YS5iaXJ0aEluZm8uaG91cixcbiAgICAgICAgZGF0YS5iaXJ0aEluZm8ubWludXRlLFxuICAgICAgICBkYXRhLmJpcnRoSW5mby5pc0hvdXJVbmtub3duXG4gICAgICApXG4gICAgICBjb25zdCByZXBvcnQgPSBnZW5lcmF0ZVJlcG9ydChjaGFydFByb2ZpbGUsIGRhdGEuc2l0dWF0aW9uKVxuXG4gICAgICBjb25zdCBzdG9yZWREYXRhID0ge1xuICAgICAgICBhdHRlbXB0X3Rva2VuOiAndG9rZW5fJyArIERhdGUubm93KCksXG4gICAgICAgIHJlc3VsdF9zbmFwc2hvdDoge1xuICAgICAgICAgIGNoYXJ0UHJvZmlsZSxcbiAgICAgICAgICB1c2VyQ29udGV4dDogZGF0YS5zaXR1YXRpb24sXG4gICAgICAgICAgcmVwb3J0XG4gICAgICAgIH0sXG4gICAgICAgIHByb2ZpbGVfaGFzaDogRGF0ZS5ub3coKS50b1N0cmluZygpLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgIHZlcnNpb246ICcxLjAuMCdcbiAgICAgIH1cblxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2ZvcnR1bmUyMDI2X3Jlc3VsdCcsIEpTT04uc3RyaW5naWZ5KHN0b3JlZERhdGEpKVxuICAgIH0sXG5cbiAgICBhc3luYyBnZXRSZXN1bHQoKTogUHJvbWlzZTxTdG9yZWREYXRhIHwgbnVsbD4ge1xuICAgICAgY29uc3QgZGF0YSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdmb3J0dW5lMjAyNl9yZXN1bHQnKVxuICAgICAgcmV0dXJuIGRhdGEgPyBKU09OLnBhcnNlKGRhdGEpIDogbnVsbFxuICAgIH0sXG5cbiAgICBhc3luYyBoYXNSZXN1bHQoKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICByZXR1cm4gISFsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZm9ydHVuZTIwMjZfcmVzdWx0JylcbiAgICB9LFxuXG4gICAgYXN5bmMgY2xlYXJBbGwoKSB7XG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnZm9ydHVuZTIwMjZfcmVzdWx0JylcbiAgICB9XG4gIH1cbn0iXSwibmFtZXMiOlsiYW5hbHl6ZUNoYXJ0IiwiZ2VuZXJhdGVSZXBvcnQiLCJEQl9OQU1FIiwiREJfVkVSU0lPTiIsIlNUT1JFX05BTUUiLCJDbGllbnRTdG9yYWdlIiwiaW5pdCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicmVxdWVzdCIsImluZGV4ZWREQiIsIm9wZW4iLCJvbmVycm9yIiwiRXJyb3IiLCJvbnN1Y2Nlc3MiLCJkYiIsInJlc3VsdCIsIm9udXBncmFkZW5lZWRlZCIsImV2ZW50IiwidGFyZ2V0Iiwib2JqZWN0U3RvcmVOYW1lcyIsImNvbnRhaW5zIiwic3RvcmUiLCJjcmVhdGVPYmplY3RTdG9yZSIsImtleVBhdGgiLCJjcmVhdGVJbmRleCIsInVuaXF1ZSIsImVuc3VyZURCIiwic2F2ZVRlc3RSZXN1bHQiLCJkYXRhIiwiY2hhcnRQcm9maWxlIiwiYmlydGhJbmZvIiwieWVhciIsIm1vbnRoIiwiZGF5IiwiaG91ciIsIm1pbnV0ZSIsImlzSG91clVua25vd24iLCJyZXBvcnQiLCJzaXR1YXRpb24iLCJzdG9yZWREYXRhIiwiYXR0ZW1wdF90b2tlbiIsIkRhdGUiLCJub3ciLCJyZXN1bHRfc25hcHNob3QiLCJ1c2VyQ29udGV4dCIsInByb2ZpbGVfaGFzaCIsInRvU3RyaW5nIiwidGltZXN0YW1wIiwidmVyc2lvbiIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwiZXJyb3IiLCJjb25zb2xlIiwiZ2V0UmVzdWx0IiwidHJhbnNhY3Rpb24iLCJvYmplY3RTdG9yZSIsImdldCIsImlkIiwiaGFzUmVzdWx0IiwiY2xlYXJBbGwiLCJjbGVhciIsImdlbmVyYXRlVG9rZW4iLCJNYXRoIiwicmFuZG9tIiwic3Vic3RyIiwiZ2VuZXJhdGVIYXNoIiwic3RyIiwiaGFzaCIsImkiLCJsZW5ndGgiLCJjaGFyIiwiY2hhckNvZGVBdCIsInN0b3JhZ2VJbnN0YW5jZSIsImNyZWF0ZUNsaWVudFN0b3JhZ2UiLCJjcmVhdGVMb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwicGFyc2UiLCJyZW1vdmVJdGVtIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/storage.ts\n"));

/***/ })

});